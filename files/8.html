<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
  <meta name="referrer" content="unsafe-url">
  <title>Во что обойдется линеаризуемость в распределенной системе / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/theme/light.css" as="style"/><link id="light-colors" rel="stylesheet" href="https://assets.habr.com/habr-web/css/theme/light.css" media="all" />
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.5e25635d.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.13e568be.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.7eb476df.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.757efe33.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.5e25635d.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.7eb476df.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.8e4d9392b3879c776c445ad1bebd933d.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/companies\/vk\/articles\/793210\/"},"headline":"Во что обойдется линеаризуемость в распределенной системе","datePublished":"2024-02-19T12:34:17+03:00","dateModified":"2024-02-19T13:11:38+03:00","author":{"@type":"Person","name":"Сергей Петренко"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общ...","url":"https:\/\/habr.com\/ru\/companies\/vk\/articles\/793210\/#post-content-body","about":["c_vk","h_hi","h_db_admins","h_distributed_systems","h_tarantool","f_develop","f_admin"],"image":["https:\/\/habrastorage.org\/webt\/nx\/pb\/-9\/nxpb-9u1all_7-zsepmv9whjfdc.jpeg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/392\/063\/e71\/392063e71b4e7f262cb5766478e3808e.gif","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/fcb\/4cd\/ab8\/fcb4cdab814b871f06d425e07b1c2fdd.gif","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/e59\/0dd\/8e2\/e590dd8e2aad48def8c45feba10bcf91.gif","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/589\/ce9\/3f3\/589ce93f3edebe28d62f0a02cb33f75e.gif","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/fb8\/4c5\/9ba\/fb84c59ba06f2e02420ac739d37d1897.gif","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/eb5\/19b\/acb\/eb519bacb56bbec16730efc2af0e47be.gif","https:\/\/habrastorage.org\/webt\/vb\/gq\/py\/vbgqpyqgrjfpctoboa92zjte3wc.png","https:\/\/habrastorage.org\/webt\/wq\/7r\/c1\/wq7rc1f9ee0i6cgrqyrluermroa.png","https:\/\/habrastorage.org\/webt\/uj\/wh\/4s\/ujwh4s85fft10qsgf8b5tzle2z8.png","https:\/\/habrastorage.org\/webt\/gl\/zq\/t6\/glzqt6hfj2ppenljbfjmu0zn1uo.png","https:\/\/habrastorage.org\/webt\/ec\/t6\/ma\/ect6maxqtkoayrbfy5cwd2z8vw0.png","https:\/\/habrastorage.org\/webt\/we\/2v\/sg\/we2vsgjwobh7otb9koaghm0ihnc.png","https:\/\/habrastorage.org\/webt\/hc\/e1\/rf\/hce1rffkfwwnh0n8gqrqnt8qkwo.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/c0e\/564\/5d2\/c0e5645d27a25d0bf35b9dcff2cc3908.gif","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/1d9\/624\/3a1\/1d96243a1b69a383fabff4cb7ec47287.gif","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/d34\/c93\/f84\/d34c93f847aa6c7970196730ae128576.gif"]}</script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.165.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="Во что обойдется линеаризуемость в распределенной системе" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Во что обойдется линеаризуемость в распределенной системе" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Во что обойдется линеаризуемость в распределенной системе" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/793210/618f757e5cba41b95b5e9c4ba5552c39/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/793210/618f757e5cba41b95b5e9c4ba5552c39/" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/793210/618f757e5cba41b95b5e9c4ba5552c39/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/793210/618f757e5cba41b95b5e9c4ba5552c39/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/793210/618f757e5cba41b95b5e9c4ba5552c39/?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="793210" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2024-02-19T09:34:17.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/companies/vk/articles/793210/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="Tarantool, архитектура, отказоустойчивость, линеаризуемость">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/publications/793210/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/companies/vk/articles/793210/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" rel="image_src" href="https://habr.com/share/publication/793210/618f757e5cba41b95b5e9c4ba5552c39/" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/publications/793210/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
  <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo tm-header__logo_hl-ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v28.faec9762..svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><a href="/ru/feed/" class="tm-main-menu__item">
        Моя лента
      </a> <a href="/ru/articles/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v28.faec9762..svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark"><title>Настройки</title> <use xlink:href="/img/megazord-v28.faec9762..svg#page-settings"></use></svg></button></div> <a href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/companies/vk/articles/793210/&amp;hl=ru" rel="nofollow" class="tm-header-user-menu__item"><button type="button" class="tm-header-user-menu__login btn btn_solid btn_small">
        Войти
      </button></a> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="vk" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><div class="tm-company-card__branding tm-company-article__branding tm-company-card__branding_loading"><div class="tm-company-card__branding-placeholder"><!----></div> <a href="https://vk.com/vkteam"><img src="//habrastorage.org/getpro/habr/branding/174/2c4/3a5/1742c43a5b504987a0fadf577a0bd4de.png" width="100%" class="tm-company-card__branding-image"></a></div></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><!----> <div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__icon pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v28.faec9762..svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><!----> <div class="tm-company-profile-card tm-company-article__profile-card"><div class="tm-company-card tm-company-profile-card__info"><div class="tm-company-card__header"><a href="/ru/companies/vk/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt height="48" src="//habrastorage.org/getpro/habr/company/9ed/c74/6b4/9edc746b484c805ecad1f941b5f7068a.png" width="48" class="tm-entity-image__pic"></div></a> <a href="https://career.habr.com/companies/vk" rel="noopener" target="_blank" class="tm-grade tm-company-card__rating"><div class="tm-counter-container"><div class="tm-counter-container__header"><svg height="24" width="24" class="tm-svg-img tm-svg-grade__icon"><title>Оценка компании на Хабр Карьере</title> <use xlink:href="/img/megazord-v28.faec9762..svg#grade"></use></svg> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-grade"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-grade"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_grade">
          4.29
        </span></span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text tm-rating__text_variant-grade">
      Оценка
    </span></div></div></a> <div class="tm-counter-container tm-company-card__rating"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
          716.31
        </span></span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div> <!----></div> <div class="tm-company-card__info"><a href="/ru/companies/vk/profile/" class="tm-company-card__name">VK</a> <div class="tm-company-card__description">Технологии, которые объединяют</div></div></div> <!----></div> <!----> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet tm-article-snippet"> <div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/sergepetrenko/" title="sergepetrenko" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt height="24" src="//habrastorage.org/r/w48/getpro/habr/avatars/9e2/0a1/c00/9e20a1c003753e7a839e9674119d83a4.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user tm-user-info__user_appearance-default"><a href="/ru/users/sergepetrenko/" class="tm-user-info__username">
      sergepetrenko
      <!----></a> <span class="tm-article-datetime-published"><time datetime="2024-02-19T09:34:17.000Z" title="2024-02-19, 12:34">2 часа назад</time></span></span></span></div> <!----></div> <h1 lang="ru" class="tm-title tm-title_h1"><span>Во что обойдется линеаризуемость в распределенной системе</span></h1> <div class="tm-article-snippet__stats"><div class="tm-article-complexity tm-article-complexity_complexity-medium"><span class="tm-svg-icon__wrapper tm-article-complexity__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Уровень сложности</title> <use xlink:href="/img/megazord-v28.faec9762..svg#complexity-medium"></use></svg></span> <span class="tm-article-complexity__label">
    Средний
  </span></div> <div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Время на прочтение</title> <use xlink:href="/img/megazord-v28.faec9762..svg#clock"></use></svg></span> <span class="tm-article-reading-time__label">
    12 мин
  </span></div> <span class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Количество просмотров</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-views"></use></svg> <span class="tm-icon-counter__value">288</span></span></div> <div class="tm-publication-hubs__container"><div class="tm-publication-hubs"><span class="tm-publication-hub__link-container"><a href="/ru/companies/vk/articles/" class="router-link-active tm-publication-hub__link"><span>Блог компании VK</span> <!----></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/hi/" class="tm-publication-hub__link"><span>Высокая производительность</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/db_admins/" class="tm-publication-hub__link"><span>Администрирование баз данных</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/distributed_systems/" class="tm-publication-hub__link"><span>Распределённые системы</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/tarantool/" class="tm-publication-hub__link"><span>Tarantool</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div><img height="1" src="https://vk.com/rtrg?p=VK-RTRG-1288550-e6f1C" width="1" style="display: none;"><img height="1" src="https://top-fwz1.mail.ru/counter?id=3200881;js=na" width="1" style="display: none;"></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><img src="https://habrastorage.org/r/w780q1/webt/nx/pb/-9/nxpb-9u1all_7-zsepmv9whjfdc.jpeg" data-src="https://habrastorage.org/webt/nx/pb/-9/nxpb-9u1all_7-zsepmv9whjfdc.jpeg" data-blurred="true"/><br/>
<br/>
Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном инстансе, начинает общаться с распределенной системой. И разумеется, поговорим о том, как эти трудности преодолеть. Я расскажу, что такое линеаризуемость, как мы ее реализуем в Tarantool и как это делают другие СУБД. В завершение мы поговорим о накладных расходах от линеаризуемости.<br/>
<a name="habracut"></a><br/>
<blockquote>Эта статья написана по <a href="https://smartdataconf.ru/talks/2dcfc9a8f9cd40fdb97c3e42ee4451e4/">моему одноименному докладу на SmartData 2023</a>. Его можно посмотреть в записи.</blockquote><br/>
<h2>Проблемы масштабирования</h2><br/>
Один мой знакомый сказал: «К сожалению, число пользователей прибавляется». В результате приложение, хранящее данные на одном сервере БД, рано или поздно упирается в производительность и живучесть этого сервера. Репликация помогает преодолеть эти ограничения. Допустим, вдобавок к основному экземпляру БД, мастеру, мы подняли ещё несколько его копий — реплик. Теперь мы можем снять нагрузку на чтение с мастера и распределить её между всеми репликами. К тому же теперь в случае падения мастера одна из реплик становится новым мастером и принимает на себя всю нагрузку на запись.<br/>
<br/>
<h3>Асинхронная репликация</h3><br/>
Самый очевидный подход к репликации  — это асинхронная репликация. Давайте просто запустим на мастере фоновый поток, который будет пересылать данные с него на реплику.<br/>
<br/>
Это, конечно, избавляет нас от единой точки отказа в лице мастера и решает проблему с перегруженностью мастера. Однако появляются аномалии, которые при доступе к одному лишь мастеру пользователь наблюдать не мог.<br/>
<br/>
<h4>Чтение старых данных</h4><br/>
<img src="https://habrastorage.org/getpro/habr/post_images/392/063/e71/392063e71b4e7f262cb5766478e3808e.gif" data-src="https://habrastorage.org/getpro/habr/post_images/392/063/e71/392063e71b4e7f262cb5766478e3808e.gif"/><br/>
<br/>
Вот клиент. Он пока не знает, что ему предстоит, поэтому улыбается. Он обращается к мастеру и просит записать значение «foo», которое мастер подтверждает. После этого клиент звонит по телефону своему другу, говорит, что он все записал, и друг идет это читать. Но его чтение попадает на реплику, и оказывается, что на реплике ещё нет записи. Ничего удивительного в этом нет, потому что сам процесс репликации асинхронный. Если друг попробует еще раз прочитать это значение, он его уже, скорее всего, увидит.<br/>
<br/>
<h4>Потеря данных</h4><br/>
<img src="https://habrastorage.org/getpro/habr/post_images/fcb/4cd/ab8/fcb4cdab814b871f06d425e07b1c2fdd.gif" data-src="https://habrastorage.org/getpro/habr/post_images/fcb/4cd/ab8/fcb4cdab814b871f06d425e07b1c2fdd.gif"/><br/>
<br/>
А вот другая ситуация: пользователь записывает значение «foo». Мастер подтверждает запись, а затем падает, не выполнив репликацию «foo». Теперь запись была подтверждена, но пользователи её не увидят до тех пор, пока мастер не восстановится и не возобновит репликацию.<br/>
<br/>
<h4>Конфликты</h4><br/>
<img src="https://habrastorage.org/getpro/habr/post_images/e59/0dd/8e2/e590dd8e2aad48def8c45feba10bcf91.gif" data-src="https://habrastorage.org/getpro/habr/post_images/e59/0dd/8e2/e590dd8e2aad48def8c45feba10bcf91.gif"/><br/>
<br/>
А ещё с асинхронной репликацией возможны конфликты. Пользователь пытается записать «foo = 1» на мастере. Мастер применяет запись и падает, не успев ответить пользователю и реплицировать запись. В такой ситуации ни пользователь, ни какая-либо из реплик кластера не знает, была выполнена запись или нет. Пользователь предполагает, что запись не выполнена, и пытается выполнить запись на новом мастере, например «foo = 2». Новый мастер подтверждает запись. После этого поднимается старый мастер. В случае, если репликация настроена «от всех ко всем», запись «foo = 1» со старого мастера попадает на все узлы кластера и перезаписывает «foo = 2». В результате любое последующее чтение вернёт неподтверждённую запись «foo = 2», а запись «foo = 1», для которой ответ вообще не был получен. К слову, старый мастер, наоборот, будет отвечать, что «foo = 2».<br/>
<br/>
<h3>Синхронная репликация</h3><br/>
От части описанных проблем помогает синхронная репликация: пусть мастер подтверждает запись клиенту только после того, как эта запись будет реплицирована на некоторое число реплик, называемое кворумом.<br/>
<br/>
<h4>Нет потери данных</h4><br/>
Теперь, если клиенту подтвердили какую-то запись, это значит, что эта запись попала не только на мастера, но и хотя бы на одну реплику. И если после подтверждения записи мастер упадет, клиент спокойно может читать подтвержденные данные с реплики.<br/>
<br/>
<img src="https://habrastorage.org/getpro/habr/post_images/589/ce9/3f3/589ce93f3edebe28d62f0a02cb33f75e.gif" data-src="https://habrastorage.org/getpro/habr/post_images/589/ce9/3f3/589ce93f3edebe28d62f0a02cb33f75e.gif"/><br/>
<br/>
<h4>Нет конфликтов</h4><br/>
При правильной настройке кворума (кворум — большинство узлов в кластере, N / 2 + 1) синхронная репликация защищает и от конфликтов. Клиент пытается записать «foo = 1» на мастере, но мастер падает, не успев подтвердить запись клиенту. Клиент предполагает, что мастер ничего не записал, и выполняет запись на новом мастере. Новый мастер, прежде чем подтвердить запись, распространяет запись на кворум реплик. Когда вернётся старый мастер, он снова попытается реплицировать запись «foo = 1», но её никто не примет, потому что из двух конфликтующих записей только одна может оказаться на большинстве узлов и только эта запись («foo = 2») считается применённой. А старая запись будет отменена. Более того, старый мастер со временем получит «foo = 2» по репликации, и данные в кластере станут консистентными.<br/>
<br/>
<img src="https://habrastorage.org/getpro/habr/post_images/fb8/4c5/9ba/fb84c59ba06f2e02420ac739d37d1897.gif" data-src="https://habrastorage.org/getpro/habr/post_images/fb8/4c5/9ba/fb84c59ba06f2e02420ac739d37d1897.gif"/><br/>
<br/>
<h4>Чтение старых данных</h4><br/>
К сожалению, справиться с чтением старых данных синхронная репликация не помогает: несмотря на то, что мастер отвечает клиенту после применения записи на кворуме узлов, даже после полученного подтверждения новый  запрос на чтение может прийти на узел вне кворума, который ещё не получил новую запись.<br/>
<br/>
<img src="https://habrastorage.org/getpro/habr/post_images/eb5/19b/acb/eb519bacb56bbec16730efc2af0e47be.gif" data-src="https://habrastorage.org/getpro/habr/post_images/eb5/19b/acb/eb519bacb56bbec16730efc2af0e47be.gif"/><br/>
<br/>
Конечно, чтения старых данных бы удалось избежать при кворуме N, то есть при записи на все узлы в кластере перед подтверждением записи клиенту. Но при кворуме N на запись падение любого узла в кластере приводит к тому, что кластер становится недоступен на запись. К тому же «без дополнительных предосторожностей» чтение устаревших данных возможно и с кворумом N. Я буду говорить про это подробнее ниже.<br/>
<br/>
Итак, с частью проблем при переходе от хранения данных на одном узле к репликации мы справились, но основная аномалия — чтение старых данных — всё ещё остаётся.<br/>
<br/>
<h2>Линеаризуемость</h2><br/>
В идеале нам бы хотелось сохранить преимущества репликации — распределение нагрузки на чтения и увеличенную доступность, — сохраняя при этом для пользователя иллюзию, будто он общается с единственным экземпляром БД. Это свойство называется линеаризуемостью. Давайте сначала посмотрим на ее определение. Линеаризуемость — это свойство одного объекта и операций чтения и записи в него. Какой это объект, решает имплементация. То есть это может быть строка в таблице, это может быть вся таблица целиком или вы можете обеспечивать линеаризуемость сразу для всей базы. Чуть позже мы увидим, что большая часть реализаций обеспечивает «честную» линеаризуемость — сразу для всей базы.<br/>
<br/>
Объект называется линеаризуемым, если любая операция над ним выполняется атомарно в какой-то момент времени между получением системой запроса и отправкой ответа клиенту. И более того, любое чтение возвращает результат всех выполненных на момент его прихода записей.<br/>
<br/>
<b>Давайте посмотрим на примере, что линеаризуемая система нам может вернуть в ответ, а что не может:</b><br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/vb/gq/py/vbgqpyqgrjfpctoboa92zjte3wc.png" data-src="https://habrastorage.org/webt/vb/gq/py/vbgqpyqgrjfpctoboa92zjte3wc.png"/><br/>
<br/>
Здесь у нас нарисованы три клиента. Цветными овалами отмечены моменты времени, когда они ждали ответа на запрос от базы. То есть когда овал начинается, клиент отправил запрос в базу. База для нас здесь какой-то черный ящик, мы не говорим, на какой сервер клиент отправил запрос. Овал кончается, когда база ответила клиенту. <br/>
<br/>
Заметьте, что чтение происходит строго после того, как пришёл ответ на первую запись, и одновременно с выполнением второй записи. То есть ответ на запрос на чтение приходит между отправкой второго запроса на запись и получением на него ответа. Линеаризуемость устанавливает порядок только между первой записью и чтением. Вторая запись и чтение могут быть выполнены в любом порядке.<br/>
<br/>
<b>Возможен и такой вариант:</b><br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/wq/7r/c1/wq7rc1f9ee0i6cgrqyrluermroa.png" data-src="https://habrastorage.org/webt/wq/7r/c1/wq7rc1f9ee0i6cgrqyrluermroa.png"/><br/>
<br/>
Если с точки зрения клиента история исполнения операций будет выглядеть так, то эта система не линеаризуемая. То есть клиент получил в ответ на чтение «foo» пустое значение. Это чтение старых данных в классическом виде, потому что чтение было отправлено строго после того, как была завершена запись «foo = 1», и, значит, оно было должно вернуть хотя бы «foo = 1».<br/>
<br/>
<b>Вот другой пример:</b><br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/uj/wh/4s/ujwh4s85fft10qsgf8b5tzle2z8.png" data-src="https://habrastorage.org/webt/uj/wh/4s/ujwh4s85fft10qsgf8b5tzle2z8.png"/><br/>
<br/>
Чтение вернуло устаревшие данные, да еще и записи поменялись местами. Я вам рассказывал, как это может произойти, в примере с конфликтами в асинхронной репликации. На картинке это не показано, но последующие чтения вернут «foo = 1» вместо «foo = 2». Это тоже нарушит линеаризуемость, потому что запись «foo = 2» была отправлена уже после того, как была подтверждена запись «foo = 1». Записи обязаны применяться в том же порядке.<br/>
<br/>
<b>А линеаризуемая история исполнения может выглядеть так:</b><br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/gl/zq/t6/glzqt6hfj2ppenljbfjmu0zn1uo.png" data-src="https://habrastorage.org/webt/gl/zq/t6/glzqt6hfj2ppenljbfjmu0zn1uo.png"/><br/>
<br/>
То есть чтение вернуло «foo = 1».<br/>
<br/>
<b>Или может так:</b><br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/ec/t6/ma/ect6maxqtkoayrbfy5cwd2z8vw0.png" data-src="https://habrastorage.org/webt/ec/t6/ma/ect6maxqtkoayrbfy5cwd2z8vw0.png"/><br/>
<br/>
Чтение здесь вернуло «foo = 2». Линеаризуемость не запрещает прочитать данные, которые были записаны позже.<br/>
<br/>
<h3>Достижение линеаризуемости</h3><br/>
Давайте теперь поговорим, как получить линеаризуемость в реальной системе. И начнем с игрушечного примера, когда у нас вообще нет проблем и в кластере всего один узел. Понятное дело, что один узел всегда обеспечивает линеаризуемость. Он просто выполняет все приходящие операции в порядке их получения.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/we/2v/sg/we2vsgjwobh7otb9koaghm0ihnc.png" data-src="https://habrastorage.org/webt/we/2v/sg/we2vsgjwobh7otb9koaghm0ihnc.png"/><br/>
<br/>
Теперь узлов резко стало пять. На самом деле вся идея линеаризуемости заключается в том, чтобы найти в кластере один узел, который видел все операции — и чтения, и записи. А потом расположить операции в истории исполнения в том же порядке, в каком их расположил этот узел. <br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/hc/e1/rf/hce1rffkfwwnh0n8gqrqnt8qkwo.png" data-src="https://habrastorage.org/webt/hc/e1/rf/hce1rffkfwwnh0n8gqrqnt8qkwo.png"/><br/>
<br/>
Чтобы один узел видел все операции, нужно, чтобы кворумы на чтение и на запись для любых двух операций пересекались. Например, когда у вас пять узлов, вы можете и писать с кворумом 3, и читать с кворумом 3. Это необходимое условие линеаризуемости. Тогда любой кворум на чтение (3) пересечётся с кворумом каждой из уже подтверждённых записей хотя бы по одному узлу. Так чтение будет знать о том, какие записи уже были подтверждены на момент его прихода. Можно сказать, что операции чтения и записи исполняются в том порядке, в котором их наблюдают узлы из пересечения кворумов.<br/>
<br/>
Итак, если у нас N узлов в кластере и мы читаем с кворумом R и пишем с кворумом W, то для линеаризуемости необходимо, чтобы R + W было больше, чем N. Впервые мы столкнулись с этим ещё на примере с синхронной репликацией, когда я говорил, что кворум на запись N избавил бы нас от чтения устаревших данных. Действительно, если взять W = N и R = 1, W + R > N, линеаризуемость достигается. Но, как я уже говорил, любой вариант с экстремальным кворумом (W = N или R = N) негативно влияет на доступность операций чтения или записи. Для нечётных N оптимальными кворумами будут пары R, W = N / 2 + 1, например N = 3, R = W = 2, а для чётных N — W, R = N / 2 + 1, N / 2 (или наоборот) — например, имея всего два узла, можно писать с кворумом 2 и читать без кворума (с «кворумом» 1). Имея четыре узла, можно писать с кворумом 3 и читать с кворумом 2.<br/>
<br/>
Важно помнить, что линеаризуемое чтение с «кворумом» 1 — это не обычное чтение. Узел, выполняющий чтение, не должен дополнительно опрашивать кворум, но всё равно должен дождаться момента, когда лидер подтвердит все записи, находящиеся на узле, прежде чем читать.<br/>
<br/>
<h3>Линеаризуемость в Raft</h3><br/>
Подход, описанный выше, реализует алгоритм Raft. Про Raft я уже писал в предыдущих статьях (<a href="https://habr.com/ru/companies/vk/articles/538062/">раз</a>, <a href="https://habr.com/ru/companies/vk/articles/675596/">два</a>), а сейчас нам достаточно знать, что Raft автоматически выбирает лидера и кворум на запись в Raft — W = N / 2 + 1. С кворумом на чтение всё сложнее, мы поговорим об этом дальше.<br/>
<br/>
В Raft лидера выбирают большинством голосов — то есть кворумом N / 2 + 1. Можно сказать, что это кворум на чтение, потому что голосующие отдают голос за кандидата, только если он обладает более актуальными данными, чем они. Для того чтобы узнать это, нужно прочитать его состояние.<br/>
<br/>
Благодаря этим кворумам каждый вновь избранный лидер гарантированно имеет у себя в журнале все подтвержденные на момент его избрания записи. Дальше уже новоиспеченный лидер делает так, чтобы журналы всех реплик совпадали с его журналом. В результате Raft гарантирует, что подтверждённые записи расположены в журналах всех узлов кластера в одном и том же порядке. Это линеаризуемость для записей, но у нас по-прежнему нет линеаризуемости для чтения. Давайте ей займемся.<br/>
<br/>
Наивная идея выглядит так: давайте просто читать с лидера. Раз уж он знает, какие записи он уже подтвердил, он легко может отвечать на любые чтения. Делать для чтения видимыми подтверждённые записи и не показывать ещё не подтверждённые. Это работает ровно до тех пор, пока кто-нибудь не сместит лидера. Чтобы сместить лидера, совсем не обязательно его об этом уведомлять, всё голосование, в процессе которого большинство узлов договорится о новом лидере, может пройти вообще незамеченным для старого лидера. Новый лидер даже может успеть подтвердить новые записи до того, как старый лидер узнает, что его сместили.<br/>
<br/>
Старый лидер, конечно, уже не сможет подтвердить ни одну новую запись (вспоминаем линеаризуемость для записей), но он по-прежнему может обрабатывать чтения и возвращать устаревшие результаты. Подход с чтением на лидере не работает. Нужно, чтобы лидер был «не уверен в себе» и перед каждым чтением опрашивал кворум, чтобы убедиться, что его не сместили.<br/>
<br/>
Так в Raft и предлагают сделать. То есть если лидер выполняет линеаризуемое чтение, он запоминает номер последней подтверждённой записи, выпускает хартбиты ко всем своим фолловерам, дожидается ответа от большинства. Если он всё еще лидер, то он просто выполняет чтение.<br/>
<br/>
<img src="https://habrastorage.org/getpro/habr/post_images/c0e/564/5d2/c0e5645d27a25d0bf35b9dcff2cc3908.gif" data-src="https://habrastorage.org/getpro/habr/post_images/c0e/564/5d2/c0e5645d27a25d0bf35b9dcff2cc3908.gif"/><br/>
<br/>
Если выяснилось, что на момент, когда ему вернулись ответы, он уже не лидер, он возвращает ошибку, не выполняя чтение. Он поймет это, если один из ответов содержал больший терм, чем тот, в котором узел является лидером.<br/>
<br/>
<img src="https://habrastorage.org/getpro/habr/post_images/1d9/624/3a1/1d96243a1b69a383fabff4cb7ec47287.gif" data-src="https://habrastorage.org/getpro/habr/post_images/1d9/624/3a1/1d96243a1b69a383fabff4cb7ec47287.gif"/> <br/>
<br/>
Этот подход предлагает автор Raft, Диего Онгаро, в своей диссертации. Этой же идеей пользуется реализация etcd/raft и, соответственно, все, кто ей пользуется: etcd, CockroachDB, TiDB. В их реализации есть только одно отличие. Они заметили следующее: вообще-то, лидер не должен быть настолько не уверен в себе, потому что после того, как он пообщался с кворумом, он знает, что еще какое-то время его никто не сместит.<br/>
<br/>
Новые выборы начинаются, только если большинство не получало сообщений от действующего лидера в течение определённого тайм-аута начала новых выборов. Если лидер только что получил ответы на heartbeat от большинства, он может быть уверен не только в том, что на момент отправки им heartbeat в кластере не начинались выборы, но и в том, что они не начинались ещё некоторое время после отправки. Соответственно, все запросы на чтение, пришедшие в течение этого промежутка времени (предположим, лидер его знает), можно обрабатывать, не консультируясь с кворумом. Соответственно, не нужно отправлять раунд хартбитов на каждое чтение, достаточно полагаться на хартбиты, которыми и так время от времени перебрасываются лидер и реплики. Линеаризуемое чтение будет ждать ответа от большинства, только если последний обмен хартбитами был слишком давно.<br/>
<br/>
На самом деле лидер никогда не знает точно промежуток времени, в течение которого выборы не начинались. Каждый раз «точный» промежуток зависит от того, насколько по-разному идут часы на узлах. Поэтому этот промежуток задаётся программно, например, как какая-то доля тайм-аута начала новых выборов. Вместе с ним задаётся максимально допустимое расхождение часов узлов, при котором алгоритм может работать (в реальных системах это что-то около сотен миллисекунд).<br/>
<br/>
И вроде бы все хорошо — мы почти никогда не платим повышенной задержкой за чтение. Но есть нюанс: мы можем читать только на лидере. А ведь изначально нашей целью было снять нагрузку на чтение с лидера. Поэтому мы в Tarantool мы пошли своим путём и сделали так, чтобы линеаризуемые чтения не нагружали лидера.<br/>
<br/>
<h3>Линеаризуемость в Tarantool</h3><br/>
В Tarantool линеаризуемые чтения может выполнять не только лидер, но и любая из реплик.<br/>
<br/>
Алгоритм действий при линеаризуемом чтении на реплике следующий:<br/>
<br/>
<ol>
<li>Опросить кворум, найти среди ответивших узел с наибольшим количеством выполненных записей.<br/>
</li>
<li>Дождаться, пока реплика выполнит столько же операций записи. <br/>
</li>
<li>Дождаться, пока все операции в журнале до этого места будут либо подтверждены, либо откачены новым лидером.<br/>
</li>
<li>Выполнить чтение.<br/>
</li>
</ol><br/>
Почему это не нарушает линеаризуемость? Реплика, в отличие от лидера, конечно, не знает, какая запись была подтверждена последней, но знает следующее: если лидер подтвердил какую-то запись, то она точно есть в журналах большинства реплик. Во время опроса кворума реплика обязательно встретит хотя бы один узел, выполнивший последнюю подтверждённую на лидере запись (если, конечно, кворумы на чтение и запись пересекаются). Когда узел дождется получения всех записей, о которых он узнал от кворума, он получит и эту запись. Когда он дождется, пока все записи в его журнале будут выполнены, он дождется, пока эта запись будет выполнена, и может выполнять чтение.<br/>
<br/>
Да, этот подход, возможно, заставит его подождать чуть больше. Может, он даже прочитает что-нибудь лишнее, потому что мы не знаем наверняка, какая запись была последней подтвержденной. Но мы точно прочитаем последнюю подтвержденную запись и не вернём устаревшие данные.<br/>
<br/>
Давайте разберёмся на примере. Теперь у нас лидер сделал две записи, обе подтвердил, но одна из реплик не успела получить вторую запись. Что будет, если эта реплика станет выполнять чтение? Реплика общается с кворумом, то есть с другой репликой (лидер в этом процессе может не участвовать, если кворум набран без него), и узнаёт, сколько записей она успела сделать. Другая реплика отвечает, что две. Значит, наша реплика должна подождать, пока не выполнит две записи. Дождавшись этого момента, а затем и момента, когда все, что есть в её журнале, будет подтверждено, реплика выполняет чтение и читает «foo = 2». Линеаризуемость не нарушена.<br/>
<br/>
<img src="https://habrastorage.org/getpro/habr/post_images/d34/c93/f84/d34c93f847aa6c7970196730ae128576.gif" data-src="https://habrastorage.org/getpro/habr/post_images/d34/c93/f84/d34c93f847aa6c7970196730ae128576.gif"/><br/>
<br/>
Теперь сравним подход к линеаризуемости в etcd, в каноническом Raft и у нас. Etcd и прочие читают только на лидере. Мы вообще не нагружаем лидера чтениями. У нас фолловеры могут, не спрашивая лидера, между собой договориться и найти, что можно прочитать, а что нельзя. Но благодаря тому, что etcd читает на лидере, они могут полагаться на хартбиты, которые лидер и так время от времени рассылает. <br/>
<br/>
Мы же вынуждены на фолловере, который никакие хартбиты по Raft не посылает, эти хартбиты посылать дополнительно (в ответ на хартбит приходит информация о количестве сделанных записей): мы копим небольшую пачку чтений на фолловере и для них всех разом выпускаем раунд хартбитов. Но в любом случае у нас есть поток хартбитов между фолловерами, выполняющими линеаризуемые чтения, и эти хартбиты рассылаются гораздо чаще, чем того требует Raft.<br/>
<br/>
При этом в случае etcd и чтения с лидера Latency для линеаризуемых чтений почти всегда такая же, как и для обычных чтений: там, кроме редких случаев, можно просто прочитать состояние лидера, не спрашивая кворум. А у нас Latency всегда возрастает на RTT от реплики до самого дальнего узла в кворуме, потому что реплика сама по себе никогда не знает, какая операция была последней подтвержденной. Чтобы это узнать, ей нужно опросить кворум.<br/>
<br/>
<h2>Цена линеаризуемости</h2><br/>
С разными подходами к линеаризуемости разобрались. Давайте теперь посмотрим, чего же это стоит для пользователя — сделать свою систему линеаризуемой.<br/>
<br/>
<b>Сильно снижает устойчивость к сбоям.</b> В то время как некворумная система у нас будет работоспособна до тех пор, пока работает хотя бы один узел, линеаризуемая система способна обрабатывать записи до тех пор, пока доступно большинство узлов, а чтения — пока доступно большинство, или, при чётных N, половина узлов.<br/>
<br/>
<b>Проблемы с двумя дата-центрами.</b> Если ваша база расположена всего в двух дата-центрах, потеря связи между ними или какие-то проблемы в одном из дата-центров сразу же вас лишают кворума и вы уже не можете писать. Читать, скорее всего, можете, потому что при чётном N кворум для чтения чуть меньше, N / 2. Но если у вас три дата-центра, таких проблем нет.<br/>
<br/>
<b>Страдает задержка и на запись, и на чтение.</b> Некворумная система получает запрос от клиента, обрабатывает его локально на сервере, на котором он пришел, и возвращает ответ. Линеаризуемая система перед обработкой запроса общается с кворумом, и в результате Latency увеличивается на RTT от узла, выполняющего операцию, до самого далёкого узла кворума.<br/>
<br/>
<h2>Когда без линеаризуемости не обойтись</h2><br/>
Ради чего же все это тогда, если от линеаризуемости столько минусов? Ради простоты написания приложений. Все-таки очень заманчиво общаться с базой данных, вообще не думая о том, распределенная она или нет. Хочется записать что-нибудь, дождаться ответа, что всё записано, и больше ни о чем не думать. Это насколько заманчиво, что в документации к Google Spanner так и написано: «Включайте линеаризуемость всегда и не включайте, только если вы хорошо всё прикинули и поняли, что с ней производительности вам хватать не будет».<br/>
<br/>
<h2>Дополнительное чтение</h2><br/>
<ul>
<li><a href="https://www.tarantool.io/en/doc/latest/concepts/atomic/transaction_model/#linearizable-read">Документация Tarantool — как включать линеаризуемые чтения</a>.<br/>
</li>
<li><a href="https://www.cockroachlabs.com/blog/living-without-atomic-clocks/">Блог CockroachDB</a>. Это ребята, которые взяли библиотеку etcd/raft. Они очень хорошо в своем блоге сравнивают себя с Google Spanner и в целом про линеаризуемость хорошо пишут, со множеством подробностей. Рекомендую.<br/>
</li>
<li><a href="https://jepsen.io/consistency">Aphyr, автор Джепсен, хорошо рассказывает, какие вообще бывают  уровни консистентности</a>. По ссылке будет пирамидка из уровней консистентности, и линеаризуемость там вторая сверху. Есть еще кое-что посильнее, не расскажу что — зайдите по ссылке и узнаете. Каждый уровень в пирамидке кликабельный.<br/>
</li>
<li>Снова Aphyr. <a href="https://aphyr.com/posts/313-strong-consistency-models">Очень хорошая статья про то, что вообще такое консистентность и почему мы определяем её именно так</a>.<br/>
</li>
</ul><br/>
Питер Бейлис, исследователь распределенных систем, <a href="http://www.bailis.org/blog/linearizability-versus-serializability/">сравнивает линеаризуемость и сериализуемость</a>, объясняет, что это совсем не одно и то же.</div></div></div> <!----> <!----></div> <!----> <!----></div> <!----> <div class="tm-article-presenter__meta"><div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BTarantool%5D" class="tm-tags-list__link">Tarantool</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%B0%5D" class="tm-tags-list__link">архитектура</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BE%D1%82%D0%BA%D0%B0%D0%B7%D0%BE%D1%83%D1%81%D1%82%D0%BE%D0%B9%D1%87%D0%B8%D0%B2%D0%BE%D1%81%D1%82%D1%8C%5D" class="tm-tags-list__link">отказоустойчивость</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BB%D0%B8%D0%BD%D0%B5%D0%B0%D1%80%D0%B8%D0%B7%D1%83%D0%B5%D0%BC%D0%BE%D1%81%D1%82%D1%8C%5D" class="tm-tags-list__link">линеаризуемость</a></li> <!----></ul></div> <div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/companies/vk/articles/" class="tm-hubs-list__link router-link-active">Блог компании VK</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/hi/" class="tm-hubs-list__link">Высокая производительность</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/db_admins/" class="tm-hubs-list__link">Администрирование баз данных</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/distributed_systems/" class="tm-hubs-list__link">Распределённые системы</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/tarantool/" class="tm-hubs-list__link">Tarantool</a></li> <!----></ul></div></div> <!----></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div title="Всего голосов 7: ↑7 и ↓0" class="tm-votes-lever tm-article-rating__votes-switcher tm-votes-lever tm-votes-lever_appearance-article"><button title="Нравится" type="button" class="tm-votes-lever__button"><svg height="24" width="24" class="tm-svg-img tm-votes-lever__icon"><title>Голосование</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-vote"></use></svg></button> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-article"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_positive">
          +7
        </span></span></div> <button title="Не нравится" type="button" class="tm-votes-lever__button"><svg height="24" width="24" class="tm-svg-img tm-votes-lever__icon tm-votes-lever__icon_arrow-down"><title>Голосование</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-vote"></use></svg></button></div> <DIV class="v-portal" style="display:none;"></DIV> <!----></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    9
  </span></button> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/companies/vk/articles/793210/comments/" class="tm-article-comments-counter-link__link"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      0
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></div></div>  <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/companies/vk/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt height="40" src="//habrastorage.org/getpro/habr/company/9ed/c74/6b4/9edc746b484c805ecad1f941b5f7068a.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/companies/vk/profile/" class="tm-company-snippet__title">VK</a> <div class="tm-company-snippet__description">Технологии, которые объединяют</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://twitter.com/inside_vk" rel="noopener" target="_blank" class="tm-article-author__contact">
      Twitter
    </a><a href="https://vk.com/insidevk" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a><a href="https://telegram.me/inside_vk" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/sergepetrenko/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt src="//habrastorage.org/getpro/habr/avatars/9e2/0a1/c00/9e20a1c003753e7a839e9674119d83a4.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 31 голос " class="tm-counter-container tm-karma tm-karma"><div class="tm-counter-container__header"><div class="tm-karma__votes tm-karma__votes_positive">
      31
    </div></div> <div class="tm-counter-container__footer"><div class="tm-karma__text">
      Карма
    </div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <div title="Рейтинг пользователя" class="tm-counter-container"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
          7
        </span></span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name tm-user-card__name_variant-article">Сергей Петренко</span> <a href="/ru/users/sergepetrenko/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article">
          @sergepetrenko
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----></div></div> <!----></div></div> <!----></section> <!----> <!----> <div class="tm-article-blocks__comments"><div id="publication-comments" class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/companies/vk/articles/793210/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.faec9762..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментировать 
    </span></a> <!----></div></div></div>  <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2> </div> <!----></header> <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><div class="tm-tabs tm-tabs"><div><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim">
        Лучшие за сутки
      </button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_slim">
        Похожие
      </button></span></div> <!----></div> <div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-article-cards"><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div></div> <!----> <!----> <!----> <!----> <!----></div> <!----></div></div> <!----></section> <div class="placeholder-wrapper"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div> <div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li></ul></div> <div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----></div> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title">Информация</h2> </div> <!----></header> <div class="tm-block__body tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://team.vk.company/" target="_blank" class="tm-company-basic-info__link">
      team.vk.company
    </a></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2008-08-09T07:42:32.000Z" title="2008-08-09, 11:42">9  августа  2008</time></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="1998-10-14T20:00:00.000Z" title="1998-10-15, 00:00">15  октября  1998</time></dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    свыше 10 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title tm-description-list__title_variant-columns-nowrap">Представитель</dt> <dd class="tm-description-list__body tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="/ru/users/Baiz/" class="tm-company-basic-info__link">
      Руслан Дзасохов
    </a></dd></dl></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----> <!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Ваш аккаунт
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/companies/vk/articles/793210/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/companies/vk/articles/793210/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Разделы
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/articles/" class="footer-menu__item-link">
                Статьи
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link router-link-active">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Информация
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement/?hl=ru_RU" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/?hl=ru_RU" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">
          Услуги
        </p> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">
                Корпоративный блог
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">
                Медийная реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">
                Нативные проекты
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">
                Образовательные программы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">
                Стартапам
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2024, </span> <span class="tm-copyright__name"><a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a></span></span></div></div></div></div> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"793210":{"id":"793210","timePublished":"2024-02-19T09:34:17+00:00","isCorporative":true,"lang":"ru","titleHtml":"Во что обойдется линеаризуемость в распределенной системе","leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fnx\u002Fpb\u002F-9\u002Fnxpb-9u1all_7-zsepmv9whjfdc.jpeg\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВсем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном инстансе, начинает общаться с распределенной системой. И разумеется, поговорим о том, как эти трудности преодолеть. Я расскажу, что такое линеаризуемость, как мы ее реализуем в Tarantool и как это делают другие СУБД. В завершение мы поговорим о накладных расходах от линеаризуемости.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"2577937","alias":"sergepetrenko","fullname":"Сергей Петренко","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F9e2\u002F0a1\u002Fc00\u002F9e20a1c003753e7a839e9674119d83a4.jpg","speciality":"Пользователь","scoreStats":{"score":31,"votesCount":31},"rating":7,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"donationsMethod":null},"statistics":{"commentsCount":0,"favoritesCount":9,"readingCount":288,"score":7,"votesCount":7,"votesCountPlus":7,"votesCountMinus":0},"hubs":[{"id":"4992","alias":"vk","type":"corporative","title":"Блог компании VK","titleHtml":"Блог компании VK","isProfiled":false,"relatedData":null},{"id":"4","alias":"hi","type":"collective","title":"Высокая производительность","titleHtml":"Высокая производительность","isProfiled":true,"relatedData":null},{"id":"17681","alias":"db_admins","type":"collective","title":"Администрирование баз данных","titleHtml":"Администрирование баз данных","isProfiled":true,"relatedData":null},{"id":"21482","alias":"distributed_systems","type":"collective","title":"Распределённые системы","titleHtml":"Распределённые системы","isProfiled":true,"relatedData":null},{"id":"22632","alias":"tarantool","type":"collective","title":"Tarantool","titleHtml":"Tarantool","isProfiled":true,"relatedData":null}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fwebt\u002Fnx\u002Fpb\u002F-9\u002Fnxpb-9u1all_7-zsepmv9whjfdc.jpeg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fnx\u002Fpb\u002F-9\u002Fnxpb-9u1all_7-zsepmv9whjfdc.jpeg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВсем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном инстансе, начинает общаться с распределенной системой. И разумеется, поговорим о том, как эти трудности преодолеть. Я расскажу, что такое линеаризуемость, как мы ее реализуем в Tarantool и как это делают другие СУБД. В завершение мы поговорим о накладных расходах от линеаризуемости.\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EЭта статья написана по \u003Ca href=\"https:\u002F\u002Fsmartdataconf.ru\u002Ftalks\u002F2dcfc9a8f9cd40fdb97c3e42ee4451e4\u002F\"\u003Eмоему одноименному докладу на SmartData 2023\u003C\u002Fa\u003E. Его можно посмотреть в записи.\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EПроблемы масштабирования\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nОдин мой знакомый сказал: «К сожалению, число пользователей прибавляется». В результате приложение, хранящее данные на одном сервере БД, рано или поздно упирается в производительность и живучесть этого сервера. Репликация помогает преодолеть эти ограничения. Допустим, вдобавок к основному экземпляру БД, мастеру, мы подняли ещё несколько его копий — реплик. Теперь мы можем снять нагрузку на чтение с мастера и распределить её между всеми репликами. К тому же теперь в случае падения мастера одна из реплик становится новым мастером и принимает на себя всю нагрузку на запись.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EАсинхронная репликация\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nСамый очевидный подход к репликации  — это асинхронная репликация. Давайте просто запустим на мастере фоновый поток, который будет пересылать данные с него на реплику.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭто, конечно, избавляет нас от единой точки отказа в лице мастера и решает проблему с перегруженностью мастера. Однако появляются аномалии, которые при доступе к одному лишь мастеру пользователь наблюдать не мог.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EЧтение старых данных\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F392\u002F063\u002Fe71\u002F392063e71b4e7f262cb5766478e3808e.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F392\u002F063\u002Fe71\u002F392063e71b4e7f262cb5766478e3808e.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВот клиент. Он пока не знает, что ему предстоит, поэтому улыбается. Он обращается к мастеру и просит записать значение «foo», которое мастер подтверждает. После этого клиент звонит по телефону своему другу, говорит, что он все записал, и друг идет это читать. Но его чтение попадает на реплику, и оказывается, что на реплике ещё нет записи. Ничего удивительного в этом нет, потому что сам процесс репликации асинхронный. Если друг попробует еще раз прочитать это значение, он его уже, скорее всего, увидит.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EПотеря данных\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ffcb\u002F4cd\u002Fab8\u002Ffcb4cdab814b871f06d425e07b1c2fdd.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ffcb\u002F4cd\u002Fab8\u002Ffcb4cdab814b871f06d425e07b1c2fdd.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА вот другая ситуация: пользователь записывает значение «foo». Мастер подтверждает запись, а затем падает, не выполнив репликацию «foo». Теперь запись была подтверждена, но пользователи её не увидят до тех пор, пока мастер не восстановится и не возобновит репликацию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EКонфликты\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe59\u002F0dd\u002F8e2\u002Fe590dd8e2aad48def8c45feba10bcf91.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe59\u002F0dd\u002F8e2\u002Fe590dd8e2aad48def8c45feba10bcf91.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА ещё с асинхронной репликацией возможны конфликты. Пользователь пытается записать «foo = 1» на мастере. Мастер применяет запись и падает, не успев ответить пользователю и реплицировать запись. В такой ситуации ни пользователь, ни какая-либо из реплик кластера не знает, была выполнена запись или нет. Пользователь предполагает, что запись не выполнена, и пытается выполнить запись на новом мастере, например «foo = 2». Новый мастер подтверждает запись. После этого поднимается старый мастер. В случае, если репликация настроена «от всех ко всем», запись «foo = 1» со старого мастера попадает на все узлы кластера и перезаписывает «foo = 2». В результате любое последующее чтение вернёт неподтверждённую запись «foo = 2», а запись «foo = 1», для которой ответ вообще не был получен. К слову, старый мастер, наоборот, будет отвечать, что «foo = 2».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EСинхронная репликация\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nОт части описанных проблем помогает синхронная репликация: пусть мастер подтверждает запись клиенту только после того, как эта запись будет реплицирована на некоторое число реплик, называемое кворумом.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EНет потери данных\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nТеперь, если клиенту подтвердили какую-то запись, это значит, что эта запись попала не только на мастера, но и хотя бы на одну реплику. И если после подтверждения записи мастер упадет, клиент спокойно может читать подтвержденные данные с реплики.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F589\u002Fce9\u002F3f3\u002F589ce93f3edebe28d62f0a02cb33f75e.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F589\u002Fce9\u002F3f3\u002F589ce93f3edebe28d62f0a02cb33f75e.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EНет конфликтов\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nПри правильной настройке кворума (кворум — большинство узлов в кластере, N \u002F 2 + 1) синхронная репликация защищает и от конфликтов. Клиент пытается записать «foo = 1» на мастере, но мастер падает, не успев подтвердить запись клиенту. Клиент предполагает, что мастер ничего не записал, и выполняет запись на новом мастере. Новый мастер, прежде чем подтвердить запись, распространяет запись на кворум реплик. Когда вернётся старый мастер, он снова попытается реплицировать запись «foo = 1», но её никто не примет, потому что из двух конфликтующих записей только одна может оказаться на большинстве узлов и только эта запись («foo = 2») считается применённой. А старая запись будет отменена. Более того, старый мастер со временем получит «foo = 2» по репликации, и данные в кластере станут консистентными.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ffb8\u002F4c5\u002F9ba\u002Ffb84c59ba06f2e02420ac739d37d1897.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ffb8\u002F4c5\u002F9ba\u002Ffb84c59ba06f2e02420ac739d37d1897.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EЧтение старых данных\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nК сожалению, справиться с чтением старых данных синхронная репликация не помогает: несмотря на то, что мастер отвечает клиенту после применения записи на кворуме узлов, даже после полученного подтверждения новый  запрос на чтение может прийти на узел вне кворума, который ещё не получил новую запись.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Feb5\u002F19b\u002Facb\u002Feb519bacb56bbec16730efc2af0e47be.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Feb5\u002F19b\u002Facb\u002Feb519bacb56bbec16730efc2af0e47be.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКонечно, чтения старых данных бы удалось избежать при кворуме N, то есть при записи на все узлы в кластере перед подтверждением записи клиенту. Но при кворуме N на запись падение любого узла в кластере приводит к тому, что кластер становится недоступен на запись. К тому же «без дополнительных предосторожностей» чтение устаревших данных возможно и с кворумом N. Я буду говорить про это подробнее ниже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, с частью проблем при переходе от хранения данных на одном узле к репликации мы справились, но основная аномалия — чтение старых данных — всё ещё остаётся.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EЛинеаризуемость\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nВ идеале нам бы хотелось сохранить преимущества репликации — распределение нагрузки на чтения и увеличенную доступность, — сохраняя при этом для пользователя иллюзию, будто он общается с единственным экземпляром БД. Это свойство называется линеаризуемостью. Давайте сначала посмотрим на ее определение. Линеаризуемость — это свойство одного объекта и операций чтения и записи в него. Какой это объект, решает имплементация. То есть это может быть строка в таблице, это может быть вся таблица целиком или вы можете обеспечивать линеаризуемость сразу для всей базы. Чуть позже мы увидим, что большая часть реализаций обеспечивает «честную» линеаризуемость — сразу для всей базы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОбъект называется линеаризуемым, если любая операция над ним выполняется атомарно в какой-то момент времени между получением системой запроса и отправкой ответа клиенту. И более того, любое чтение возвращает результат всех выполненных на момент его прихода записей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EДавайте посмотрим на примере, что линеаризуемая система нам может вернуть в ответ, а что не может:\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fvb\u002Fgq\u002Fpy\u002Fvbgqpyqgrjfpctoboa92zjte3wc.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fvb\u002Fgq\u002Fpy\u002Fvbgqpyqgrjfpctoboa92zjte3wc.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗдесь у нас нарисованы три клиента. Цветными овалами отмечены моменты времени, когда они ждали ответа на запрос от базы. То есть когда овал начинается, клиент отправил запрос в базу. База для нас здесь какой-то черный ящик, мы не говорим, на какой сервер клиент отправил запрос. Овал кончается, когда база ответила клиенту. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗаметьте, что чтение происходит строго после того, как пришёл ответ на первую запись, и одновременно с выполнением второй записи. То есть ответ на запрос на чтение приходит между отправкой второго запроса на запись и получением на него ответа. Линеаризуемость устанавливает порядок только между первой записью и чтением. Вторая запись и чтение могут быть выполнены в любом порядке.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EВозможен и такой вариант:\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fwq\u002F7r\u002Fc1\u002Fwq7rc1f9ee0i6cgrqyrluermroa.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fwq\u002F7r\u002Fc1\u002Fwq7rc1f9ee0i6cgrqyrluermroa.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли с точки зрения клиента история исполнения операций будет выглядеть так, то эта система не линеаризуемая. То есть клиент получил в ответ на чтение «foo» пустое значение. Это чтение старых данных в классическом виде, потому что чтение было отправлено строго после того, как была завершена запись «foo = 1», и, значит, оно было должно вернуть хотя бы «foo = 1».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EВот другой пример:\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fuj\u002Fwh\u002F4s\u002Fujwh4s85fft10qsgf8b5tzle2z8.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fuj\u002Fwh\u002F4s\u002Fujwh4s85fft10qsgf8b5tzle2z8.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтение вернуло устаревшие данные, да еще и записи поменялись местами. Я вам рассказывал, как это может произойти, в примере с конфликтами в асинхронной репликации. На картинке это не показано, но последующие чтения вернут «foo = 1» вместо «foo = 2». Это тоже нарушит линеаризуемость, потому что запись «foo = 2» была отправлена уже после того, как была подтверждена запись «foo = 1». Записи обязаны применяться в том же порядке.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EА линеаризуемая история исполнения может выглядеть так:\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fgl\u002Fzq\u002Ft6\u002Fglzqt6hfj2ppenljbfjmu0zn1uo.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fgl\u002Fzq\u002Ft6\u002Fglzqt6hfj2ppenljbfjmu0zn1uo.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТо есть чтение вернуло «foo = 1».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EИли может так:\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fec\u002Ft6\u002Fma\u002Fect6maxqtkoayrbfy5cwd2z8vw0.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fec\u002Ft6\u002Fma\u002Fect6maxqtkoayrbfy5cwd2z8vw0.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтение здесь вернуло «foo = 2». Линеаризуемость не запрещает прочитать данные, которые были записаны позже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EДостижение линеаризуемости\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nДавайте теперь поговорим, как получить линеаризуемость в реальной системе. И начнем с игрушечного примера, когда у нас вообще нет проблем и в кластере всего один узел. Понятное дело, что один узел всегда обеспечивает линеаризуемость. Он просто выполняет все приходящие операции в порядке их получения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fwe\u002F2v\u002Fsg\u002Fwe2vsgjwobh7otb9koaghm0ihnc.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fwe\u002F2v\u002Fsg\u002Fwe2vsgjwobh7otb9koaghm0ihnc.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь узлов резко стало пять. На самом деле вся идея линеаризуемости заключается в том, чтобы найти в кластере один узел, который видел все операции — и чтения, и записи. А потом расположить операции в истории исполнения в том же порядке, в каком их расположил этот узел. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fhc\u002Fe1\u002Frf\u002Fhce1rffkfwwnh0n8gqrqnt8qkwo.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fhc\u002Fe1\u002Frf\u002Fhce1rffkfwwnh0n8gqrqnt8qkwo.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы один узел видел все операции, нужно, чтобы кворумы на чтение и на запись для любых двух операций пересекались. Например, когда у вас пять узлов, вы можете и писать с кворумом 3, и читать с кворумом 3. Это необходимое условие линеаризуемости. Тогда любой кворум на чтение (3) пересечётся с кворумом каждой из уже подтверждённых записей хотя бы по одному узлу. Так чтение будет знать о том, какие записи уже были подтверждены на момент его прихода. Можно сказать, что операции чтения и записи исполняются в том порядке, в котором их наблюдают узлы из пересечения кворумов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, если у нас N узлов в кластере и мы читаем с кворумом R и пишем с кворумом W, то для линеаризуемости необходимо, чтобы R + W было больше, чем N. Впервые мы столкнулись с этим ещё на примере с синхронной репликацией, когда я говорил, что кворум на запись N избавил бы нас от чтения устаревших данных. Действительно, если взять W = N и R = 1, W + R \u003E N, линеаризуемость достигается. Но, как я уже говорил, любой вариант с экстремальным кворумом (W = N или R = N) негативно влияет на доступность операций чтения или записи. Для нечётных N оптимальными кворумами будут пары R, W = N \u002F 2 + 1, например N = 3, R = W = 2, а для чётных N — W, R = N \u002F 2 + 1, N \u002F 2 (или наоборот) — например, имея всего два узла, можно писать с кворумом 2 и читать без кворума (с «кворумом» 1). Имея четыре узла, можно писать с кворумом 3 и читать с кворумом 2.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВажно помнить, что линеаризуемое чтение с «кворумом» 1 — это не обычное чтение. Узел, выполняющий чтение, не должен дополнительно опрашивать кворум, но всё равно должен дождаться момента, когда лидер подтвердит все записи, находящиеся на узле, прежде чем читать.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EЛинеаризуемость в Raft\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПодход, описанный выше, реализует алгоритм Raft. Про Raft я уже писал в предыдущих статьях (\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F538062\u002F\"\u003Eраз\u003C\u002Fa\u003E, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F675596\u002F\"\u003Eдва\u003C\u002Fa\u003E), а сейчас нам достаточно знать, что Raft автоматически выбирает лидера и кворум на запись в Raft — W = N \u002F 2 + 1. С кворумом на чтение всё сложнее, мы поговорим об этом дальше.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ Raft лидера выбирают большинством голосов — то есть кворумом N \u002F 2 + 1. Можно сказать, что это кворум на чтение, потому что голосующие отдают голос за кандидата, только если он обладает более актуальными данными, чем они. Для того чтобы узнать это, нужно прочитать его состояние.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nБлагодаря этим кворумам каждый вновь избранный лидер гарантированно имеет у себя в журнале все подтвержденные на момент его избрания записи. Дальше уже новоиспеченный лидер делает так, чтобы журналы всех реплик совпадали с его журналом. В результате Raft гарантирует, что подтверждённые записи расположены в журналах всех узлов кластера в одном и том же порядке. Это линеаризуемость для записей, но у нас по-прежнему нет линеаризуемости для чтения. Давайте ей займемся.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНаивная идея выглядит так: давайте просто читать с лидера. Раз уж он знает, какие записи он уже подтвердил, он легко может отвечать на любые чтения. Делать для чтения видимыми подтверждённые записи и не показывать ещё не подтверждённые. Это работает ровно до тех пор, пока кто-нибудь не сместит лидера. Чтобы сместить лидера, совсем не обязательно его об этом уведомлять, всё голосование, в процессе которого большинство узлов договорится о новом лидере, может пройти вообще незамеченным для старого лидера. Новый лидер даже может успеть подтвердить новые записи до того, как старый лидер узнает, что его сместили.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСтарый лидер, конечно, уже не сможет подтвердить ни одну новую запись (вспоминаем линеаризуемость для записей), но он по-прежнему может обрабатывать чтения и возвращать устаревшие результаты. Подход с чтением на лидере не работает. Нужно, чтобы лидер был «не уверен в себе» и перед каждым чтением опрашивал кворум, чтобы убедиться, что его не сместили.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТак в Raft и предлагают сделать. То есть если лидер выполняет линеаризуемое чтение, он запоминает номер последней подтверждённой записи, выпускает хартбиты ко всем своим фолловерам, дожидается ответа от большинства. Если он всё еще лидер, то он просто выполняет чтение.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fc0e\u002F564\u002F5d2\u002Fc0e5645d27a25d0bf35b9dcff2cc3908.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fc0e\u002F564\u002F5d2\u002Fc0e5645d27a25d0bf35b9dcff2cc3908.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли выяснилось, что на момент, когда ему вернулись ответы, он уже не лидер, он возвращает ошибку, не выполняя чтение. Он поймет это, если один из ответов содержал больший терм, чем тот, в котором узел является лидером.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F1d9\u002F624\u002F3a1\u002F1d96243a1b69a383fabff4cb7ec47287.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F1d9\u002F624\u002F3a1\u002F1d96243a1b69a383fabff4cb7ec47287.gif\"\u002F\u003E \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭтот подход предлагает автор Raft, Диего Онгаро, в своей диссертации. Этой же идеей пользуется реализация etcd\u002Fraft и, соответственно, все, кто ей пользуется: etcd, CockroachDB, TiDB. В их реализации есть только одно отличие. Они заметили следующее: вообще-то, лидер не должен быть настолько не уверен в себе, потому что после того, как он пообщался с кворумом, он знает, что еще какое-то время его никто не сместит.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНовые выборы начинаются, только если большинство не получало сообщений от действующего лидера в течение определённого тайм-аута начала новых выборов. Если лидер только что получил ответы на heartbeat от большинства, он может быть уверен не только в том, что на момент отправки им heartbeat в кластере не начинались выборы, но и в том, что они не начинались ещё некоторое время после отправки. Соответственно, все запросы на чтение, пришедшие в течение этого промежутка времени (предположим, лидер его знает), можно обрабатывать, не консультируясь с кворумом. Соответственно, не нужно отправлять раунд хартбитов на каждое чтение, достаточно полагаться на хартбиты, которыми и так время от времени перебрасываются лидер и реплики. Линеаризуемое чтение будет ждать ответа от большинства, только если последний обмен хартбитами был слишком давно.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа самом деле лидер никогда не знает точно промежуток времени, в течение которого выборы не начинались. Каждый раз «точный» промежуток зависит от того, насколько по-разному идут часы на узлах. Поэтому этот промежуток задаётся программно, например, как какая-то доля тайм-аута начала новых выборов. Вместе с ним задаётся максимально допустимое расхождение часов узлов, при котором алгоритм может работать (в реальных системах это что-то около сотен миллисекунд).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ вроде бы все хорошо — мы почти никогда не платим повышенной задержкой за чтение. Но есть нюанс: мы можем читать только на лидере. А ведь изначально нашей целью было снять нагрузку на чтение с лидера. Поэтому мы в Tarantool мы пошли своим путём и сделали так, чтобы линеаризуемые чтения не нагружали лидера.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EЛинеаризуемость в Tarantool\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nВ Tarantool линеаризуемые чтения может выполнять не только лидер, но и любая из реплик.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАлгоритм действий при линеаризуемом чтении на реплике следующий:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EОпросить кворум, найти среди ответивших узел с наибольшим количеством выполненных записей.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003EДождаться, пока реплика выполнит столько же операций записи. \u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003EДождаться, пока все операции в журнале до этого места будут либо подтверждены, либо откачены новым лидером.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003EВыполнить чтение.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nПочему это не нарушает линеаризуемость? Реплика, в отличие от лидера, конечно, не знает, какая запись была подтверждена последней, но знает следующее: если лидер подтвердил какую-то запись, то она точно есть в журналах большинства реплик. Во время опроса кворума реплика обязательно встретит хотя бы один узел, выполнивший последнюю подтверждённую на лидере запись (если, конечно, кворумы на чтение и запись пересекаются). Когда узел дождется получения всех записей, о которых он узнал от кворума, он получит и эту запись. Когда он дождется, пока все записи в его журнале будут выполнены, он дождется, пока эта запись будет выполнена, и может выполнять чтение.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДа, этот подход, возможно, заставит его подождать чуть больше. Может, он даже прочитает что-нибудь лишнее, потому что мы не знаем наверняка, какая запись была последней подтвержденной. Но мы точно прочитаем последнюю подтвержденную запись и не вернём устаревшие данные.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДавайте разберёмся на примере. Теперь у нас лидер сделал две записи, обе подтвердил, но одна из реплик не успела получить вторую запись. Что будет, если эта реплика станет выполнять чтение? Реплика общается с кворумом, то есть с другой репликой (лидер в этом процессе может не участвовать, если кворум набран без него), и узнаёт, сколько записей она успела сделать. Другая реплика отвечает, что две. Значит, наша реплика должна подождать, пока не выполнит две записи. Дождавшись этого момента, а затем и момента, когда все, что есть в её журнале, будет подтверждено, реплика выполняет чтение и читает «foo = 2». Линеаризуемость не нарушена.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fd34\u002Fc93\u002Ff84\u002Fd34c93f847aa6c7970196730ae128576.gif\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fd34\u002Fc93\u002Ff84\u002Fd34c93f847aa6c7970196730ae128576.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь сравним подход к линеаризуемости в etcd, в каноническом Raft и у нас. Etcd и прочие читают только на лидере. Мы вообще не нагружаем лидера чтениями. У нас фолловеры могут, не спрашивая лидера, между собой договориться и найти, что можно прочитать, а что нельзя. Но благодаря тому, что etcd читает на лидере, они могут полагаться на хартбиты, которые лидер и так время от времени рассылает. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМы же вынуждены на фолловере, который никакие хартбиты по Raft не посылает, эти хартбиты посылать дополнительно (в ответ на хартбит приходит информация о количестве сделанных записей): мы копим небольшую пачку чтений на фолловере и для них всех разом выпускаем раунд хартбитов. Но в любом случае у нас есть поток хартбитов между фолловерами, выполняющими линеаризуемые чтения, и эти хартбиты рассылаются гораздо чаще, чем того требует Raft.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри этом в случае etcd и чтения с лидера Latency для линеаризуемых чтений почти всегда такая же, как и для обычных чтений: там, кроме редких случаев, можно просто прочитать состояние лидера, не спрашивая кворум. А у нас Latency всегда возрастает на RTT от реплики до самого дальнего узла в кворуме, потому что реплика сама по себе никогда не знает, какая операция была последней подтвержденной. Чтобы это узнать, ей нужно опросить кворум.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EЦена линеаризуемости\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nС разными подходами к линеаризуемости разобрались. Давайте теперь посмотрим, чего же это стоит для пользователя — сделать свою систему линеаризуемой.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EСильно снижает устойчивость к сбоям.\u003C\u002Fb\u003E В то время как некворумная система у нас будет работоспособна до тех пор, пока работает хотя бы один узел, линеаризуемая система способна обрабатывать записи до тех пор, пока доступно большинство узлов, а чтения — пока доступно большинство, или, при чётных N, половина узлов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EПроблемы с двумя дата-центрами.\u003C\u002Fb\u003E Если ваша база расположена всего в двух дата-центрах, потеря связи между ними или какие-то проблемы в одном из дата-центров сразу же вас лишают кворума и вы уже не можете писать. Читать, скорее всего, можете, потому что при чётном N кворум для чтения чуть меньше, N \u002F 2. Но если у вас три дата-центра, таких проблем нет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EСтрадает задержка и на запись, и на чтение.\u003C\u002Fb\u003E Некворумная система получает запрос от клиента, обрабатывает его локально на сервере, на котором он пришел, и возвращает ответ. Линеаризуемая система перед обработкой запроса общается с кворумом, и в результате Latency увеличивается на RTT от узла, выполняющего операцию, до самого далёкого узла кворума.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EКогда без линеаризуемости не обойтись\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nРади чего же все это тогда, если от линеаризуемости столько минусов? Ради простоты написания приложений. Все-таки очень заманчиво общаться с базой данных, вообще не думая о том, распределенная она или нет. Хочется записать что-нибудь, дождаться ответа, что всё записано, и больше ни о чем не думать. Это насколько заманчиво, что в документации к Google Spanner так и написано: «Включайте линеаризуемость всегда и не включайте, только если вы хорошо всё прикинули и поняли, что с ней производительности вам хватать не будет».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EДополнительное чтение\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.tarantool.io\u002Fen\u002Fdoc\u002Flatest\u002Fconcepts\u002Fatomic\u002Ftransaction_model\u002F#linearizable-read\"\u003EДокументация Tarantool — как включать линеаризуемые чтения\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.cockroachlabs.com\u002Fblog\u002Fliving-without-atomic-clocks\u002F\"\u003EБлог CockroachDB\u003C\u002Fa\u003E. Это ребята, которые взяли библиотеку etcd\u002Fraft. Они очень хорошо в своем блоге сравнивают себя с Google Spanner и в целом про линеаризуемость хорошо пишут, со множеством подробностей. Рекомендую.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fjepsen.io\u002Fconsistency\"\u003EAphyr, автор Джепсен, хорошо рассказывает, какие вообще бывают  уровни консистентности\u003C\u002Fa\u003E. По ссылке будет пирамидка из уровней консистентности, и линеаризуемость там вторая сверху. Есть еще кое-что посильнее, не расскажу что — зайдите по ссылке и узнаете. Каждый уровень в пирамидке кликабельный.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003EСнова Aphyr. \u003Ca href=\"https:\u002F\u002Faphyr.com\u002Fposts\u002F313-strong-consistency-models\"\u003EОчень хорошая статья про то, что вообще такое консистентность и почему мы определяем её именно так\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nПитер Бейлис, исследователь распределенных систем, \u003Ca href=\"http:\u002F\u002Fwww.bailis.org\u002Fblog\u002Flinearizability-versus-serializability\u002F\"\u003Eсравнивает линеаризуемость и сериализуемость\u003C\u002Fa\u003E, объясняет, что это совсем не одно и то же.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"Tarantool"},{"titleHtml":"архитектура"},{"titleHtml":"отказоустойчивость"},{"titleHtml":"линеаризуемость"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F793210\u002F618f757e5cba41b95b5e9c4ba5552c39\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F793210\u002F618f757e5cba41b95b5e9c4ba5552c39\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fvk\\\u002Farticles\\\u002F793210\\\u002F\"},\"headline\":\"Во что обойдется линеаризуемость в распределенной системе\",\"datePublished\":\"2024-02-19T12:34:17+03:00\",\"dateModified\":\"2024-02-19T13:11:38+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Сергей Петренко\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общ...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fvk\\\u002Farticles\\\u002F793210\\\u002F#post-content-body\",\"about\":[\"c_vk\",\"h_hi\",\"h_db_admins\",\"h_distributed_systems\",\"h_tarantool\",\"f_develop\",\"f_admin\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fnx\\\u002Fpb\\\u002F-9\\\u002Fnxpb-9u1all_7-zsepmv9whjfdc.jpeg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F392\\\u002F063\\\u002Fe71\\\u002F392063e71b4e7f262cb5766478e3808e.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Ffcb\\\u002F4cd\\\u002Fab8\\\u002Ffcb4cdab814b871f06d425e07b1c2fdd.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fe59\\\u002F0dd\\\u002F8e2\\\u002Fe590dd8e2aad48def8c45feba10bcf91.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F589\\\u002Fce9\\\u002F3f3\\\u002F589ce93f3edebe28d62f0a02cb33f75e.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Ffb8\\\u002F4c5\\\u002F9ba\\\u002Ffb84c59ba06f2e02420ac739d37d1897.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Feb5\\\u002F19b\\\u002Facb\\\u002Feb519bacb56bbec16730efc2af0e47be.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fvb\\\u002Fgq\\\u002Fpy\\\u002Fvbgqpyqgrjfpctoboa92zjte3wc.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fwq\\\u002F7r\\\u002Fc1\\\u002Fwq7rc1f9ee0i6cgrqyrluermroa.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fuj\\\u002Fwh\\\u002F4s\\\u002Fujwh4s85fft10qsgf8b5tzle2z8.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fgl\\\u002Fzq\\\u002Ft6\\\u002Fglzqt6hfj2ppenljbfjmu0zn1uo.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fec\\\u002Ft6\\\u002Fma\\\u002Fect6maxqtkoayrbfy5cwd2z8vw0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fwe\\\u002F2v\\\u002Fsg\\\u002Fwe2vsgjwobh7otb9koaghm0ihnc.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fhc\\\u002Fe1\\\u002Frf\\\u002Fhce1rffkfwwnh0n8gqrqnt8qkwo.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fc0e\\\u002F564\\\u002F5d2\\\u002Fc0e5645d27a25d0bf35b9dcff2cc3908.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F1d9\\\u002F624\\\u002F3a1\\\u002F1d96243a1b69a383fabff4cb7ec47287.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fd34\\\u002Fc93\\\u002Ff84\\\u002Fd34c93f847aa6c7970196730ae128576.gif\"]}","metaDescription":"Всем привет, меня зовут Сергей Петренко, я программист в Tarantool. Сегодня мы посмотрим, с какими трудностями сталкивается клиент, когда вместо того чтобы общаться с системой, расположенной на одном...","mainImageUrl":null,"amp":true,"customTrackerLinks":["https:\u002F\u002Fvk.com\u002Frtrg?p=VK-RTRG-1288550-e6f1C","https:\u002F\u002Ftop-fwz1.mail.ru\u002Fcounter?id=3200881;js=na"]},"polls":[],"commentsEnabled":{"status":true,"reason":null},"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":null,"banner":null,"multiwidget":null,"readingTime":12,"complexity":"medium","isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"postReasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"viewedPosts":[],"myFeedFilter":{"complexity":"all","score":"all","types":["articles","posts","news"]},"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"vk":{"alias":"vk","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F9ed\u002Fc74\u002F6b4\u002F9edc746b484c805ecad1f941b5f7068a.png","titleHtml":"VK","descriptionHtml":"Технологии, которые объединяют","relatedData":null,"statistics":{"subscribersCount":194916,"rating":716.31,"invest":null,"postsCount":2606,"threadsCount":2,"newsCount":282,"vacanciesCount":33,"employeesCount":714,"careerRating":4.29},"foundationDate":{"year":"1998","month":"10","day":"15"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fteam.vk.company\u002F","staffNumber":"свыше 10 000 человек","registrationDate":"2008-08-09T07:42:32+00:00","representativeUser":{"alias":"Baiz","fullname":"Руслан Дзасохов"},"contacts":[{"title":"Twitter","url":"https:\u002F\u002Ftwitter.com\u002Finside_vk","siteTitle":null,"favicon":null},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Finsidevk","siteTitle":"VK | VK","favicon":"https:\u002F\u002Fm.vk.com\u002Fimages\u002Ficons\u002Ffavicons\u002Ffav_logo.ico?9"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Finside_vk","siteTitle":"Telegram: Contact @inside_vk","favicon":"https:\u002F\u002Ftelegram.org\u002Fimg\u002Fwebsite_icon.svg?4"}],"settings":{"analyticsSettings":[{"type":"ga","trackingId":"UA-16546458-6"}],"branding":{"imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fbranding\u002F174\u002F2c4\u002F3a5\u002F1742c43a5b504987a0fadf577a0bd4de.png","linkUrl":"https:\u002F\u002Fvk.com\u002Fvkteam","pixelUrl":null},"status":"active","isStartup":false,"hasActivePolls":false},"metadata":{"titleHtml":"VK, Москва - Технологии, которые объединяют с 15 октября 1998 г.","title":"VK, Москва - Технологии, которые объединяют с 15 октября 1998 г.","keywords":["Машинное обучение","DevOps","Kubernetes","Big Data","Tarantool","mail.ru","vk cloud","никто не читает теги","tarantool","mail.ru cloud solutions","kubernetes","mail.ru group","вконтакте","vk cloud solutions","python","devops","geekbrains","разработка","machine learning","машинное обучение","php","vk","javascript","android","go"],"descriptionHtml":"2 606 статей от авторов компании VK","description":"2 606 статей от авторов компании VK"},"aDeskSettings":null,"careerAlias":"vk","schoolAlias":null}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"multiwidgets":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"multiwidgetLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"pagesCount":0},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"flows":{"flows":[{"alias":"develop","id":"1","route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":"6","route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":"2","route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":"3","route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":"4","route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":"7","route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}],"updates":{}},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"welcomePage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"query":{},"pathname":"\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F793210\u002F","path":"\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F793210\u002F","href":"\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F793210\u002F"}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null,"userUpdates":{"feeds":{"newPostsCount":null,"newThreadsCount":null,"newNewsCount":null,"newCount":null},"conversationUnreadCount":0}},"modal":{"modals":[]},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{"vacancies":"project-block-company-article"}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":[]},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"notificationsLoading":false,"notificationsList":[],"notificationsPageCount":0,"pendingMarkNotificationsRead":[],"publicationsLoading":true,"publicationsList":[],"publicationsPageCount":0,"pendingDeletePublications":false,"pendingMarkPublicationsRead":false},"events":{"events":[{"id":"events_130","titleHtml":"Как использовать облачные платформы Сloud.ru: серия демо-встреч по четвергам","descriptionHtml":"\u003Cp\u003EВ формате еженедельных 30-минутных онлайн-встреч расскажем о возможностях облачных платформ Сloud.ru и потенциале их использования. В прямом эфире эксперты Cloud.ru покажут, как работают облачные платформы и ответят на вопросы участников.\u003C\u002Fp\u003E\u003Cp\u003EОбщая программа встреч:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eвведение: какие задачи помогают решить облачные платформы Cloud.ru Advanced, Cloud.ru Enterprise и Cloud.ru Evolution;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eобзор конкретной платформы и облачных сервисов, регистрация в личном кабинете;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eответы на вопросы.&nbsp;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EБудет полезно тем, кто только задумывается о переезде в облако и планирует узнать о нем больше. А также тем, кто уже использует облачные технологии и хочет задать вопросы эксперту или получить совет по работе с платформой.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F48c\u002F817\u002Ff0b\u002F48c817f0b52e6b603845a694cb2cd251.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_cloudru","startDay":"2024-02-01","startTime":"11:00","finishDay":"2024-02-29","isOnline":true,"geo":[]},{"id":"events_154","titleHtml":"Конкурс грантов на обучение IT-профессиям от Хекслета","descriptionHtml":"\u003Cp\u003EДарим три гранта на бесплатное обучение IT-профессии в группе с наставником.\u003C\u002Fp\u003E\u003Cp\u003EДля участия необходимо до 29 февраля пройти не менее 20 бесплатных уроков по выбранной профессии, заполнить анкету, а также пройти интервью с наставником.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EСреди всех оставивших заявку и прошедших уроки разыграем еще 30 призов: полезные подписки, книги и мерч.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F79a\u002Fee8\u002F11d\u002F79aee811d3b1883b61032cc3a14949d7.png","eventUrl":"https:\u002F\u002Fspecial.hexlet.io\u002Fgrant?promo_name=freemium-grant%2520&promo_creative=habr&promo_start=050224","startDay":"2024-02-05","finishDay":"2024-02-29","isOnline":true,"geo":[]},{"id":"events_162","titleHtml":"One Day Offer от УЦСБ","descriptionHtml":"\u003Cp\u003EУЦСБ ищет специалистов по информационной безопасности и проводит One Day Offer.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EЭто специальное карьерное мероприятие, где за один день можно пройти путь соискателя: все этапы отбора, которые обычно занимают больше месяца, и получить предложение о работе в аккредитованной ИТ-компании.\u003C\u002Fp\u003E\u003Cp\u003EК участию приглашаются специалисты по Application Security, анализу защищенности (pentest), аналитики по информационной безопасности в направления аудита и разработки, инженеры автоматизации ИБ.\u003C\u002Fp\u003E\u003Cp\u003EВ&nbsp; рамках One Day Offer каждый участник пройдет собеседования с HR-специалистом и тимлидом команды разработки, выполнит тестовое задание, а также сможет неформально пообщаться с командой и познакомиться со своими потенциальными коллегами. В конце дня успешные кандидаты получат официальный оффер от УЦСБ.\u003C\u002Fp\u003E\u003Cp\u003EOne Day Offer пройдет в онлайн-формате, участвовать можно из любого уголка земли.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EДля участия необходимо иметь опыт работы в сфере ИБ от двух лет и оставить до 15 февраля заявку на участие на сайте. \u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F6d4\u002F136\u002F22c\u002F6d413622ccff3c25ae26659f337e7dca.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_usscoffer","startDay":"2024-02-17","startTime":"10:00","finishDay":"2024-02-17","isOnline":true,"geo":[]},{"id":"events_142","titleHtml":"Первая всероссийская студенческая олимпиада по фронтенду","descriptionHtml":"\u003Cp\u003EЗапишись на первую всероссийскую студенческую олимпиаду по фронтенду. \u003C\u002Fp\u003E\u003Cp\u003EВсе задания —&nbsp;реальные задачи, с которыми фронтендеры сталкиваются каждый день. Никаких головоломок. Если умеете верстать и разбираетесь в JS —&nbsp;справитесь!\u003C\u002Fp\u003E\u003Cp\u003EПобедители олимпиады и лидеры рейтинга получат приглашение на работу или стажировку в Яндексе и других ведущих ИТ-компаниях России.\u003C\u002Fp\u003E\u003Cp\u003EОрганизаторы олимпиады\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EHTML Academy — крупнейшая российская онлайн-школа по веб-разработке, уже 12 лет готовит отличных разработчиков.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЯндекс — лидер на российском рынке инновационных высокотехнологичных продуктов. На олимпиаде валидирует задания и оценки.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EИТМО — ведущий вуз России в подготовке ИТ-специалистов, проверит задания и проведёт научное исследование результатов.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EКак подать заявку\u003C\u002Fp\u003E\u003Cp\u003EЗаходи на официальный сайт олимпиады и заполняй форму. Встречаемся онлайн, 18 февраля! Участие бесплатное.\u003C\u002Fp\u003E\u003Cp\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd1e\u002Fa22\u002F4cd\u002Fd1ea224cd82ae67817b7cac7f7fc052c.png","eventUrl":"https:\u002F\u002Fhtmlacademy.ru\u002Folympics","startDay":"2024-02-18","finishDay":"2024-02-19","isOnline":true,"geo":[]},{"id":"events_174","titleHtml":"СБП Dev Meetup: онлайн-митап для backend-разработчиков","descriptionHtml":"\u003Cp\u003EИТ-команда Мир Plat.Form (НСПК) приглашает всех бэкенд-разработчиков на онлайн-митап.\u003C\u002Fp\u003E\u003Cp\u003EВ программе — исследование архитектуры Системы быстрых платежей (СБП) и практические советы по оптимизации бэкенда.\u003C\u002Fp\u003E\u003Cp\u003EМножество сценариев оплаты СБП объединяет одно — платёжные ссылки. Артём Бояршинов (Мир Plat.Form) выступит на тему «СБП. Платёжные ссылки и где они обитают». Мы разберём типы платёжных (и не только) ссылок, выясним, как они хранятся и как устроены изнутри. А еще как и зачем команда СБП перевела их хранение в Cassandra и какие грабли при этом собрала.\u003C\u002Fp\u003E\u003Cp\u003EСБП стремительно развивалась в сжатые сроки, выдерживая высокие требования к системе.&nbsp;С ростом нагрузки менялись требования к структуре Akka-кластера. Михаил Михалкин (Мир Plat.Form) расскажет про разделение Akka-кластера. Поясним, почему важно, чтобы кластер состоял из однородных по типу микросервисов и как с этим помогает Kafka.\u003C\u002Fp\u003E\u003Cp\u003EМитап пройдёт онлайн на YouTube, ссылку пришлём за час до начала.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F320\u002F03e\u002F2a8\u002F32003e2a83ad34dc656a4fcd93974ea7.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_nspkdr","startDay":"2024-02-19","startTime":"17:00","finishDay":"2024-02-19","isOnline":true,"geo":[]},{"id":"events_156","titleHtml":"Практический урок «Hard Skills корпоративного архитектора»","descriptionHtml":"\u003Cp\u003EКакие hard skills нужны корпоративному архитектору в IT? \u003Cbr\u003E\u003Cbr\u003EРасскажет опытный эксперт на бесплатном практическом уроке от OTUS, где мы разберём:&nbsp;\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eценность корпоративного архитектора нового поколения;&nbsp;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eместо архитектора в компаниях различных типов;&nbsp;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eхарды, софты и чемоданчик архитектора;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eтиповой рабочий день архитектора.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EУрок идеально подойдёт опытным разработчикам, аналитикам, архитекторам и специалистам в предметных областях. \u003Cbr\u003E\u003Cbr\u003EВстречаемся 19 февраля в 19:00 (мск) в рамках курса «Enterprise Architect». После урока у вас будет возможность стать студентом курса по специальной цене и даже в рассрочку. \u003Cbr\u003E\u003Cbr\u003EЗарегистрируйтесь прямо сейчас, чтобы посетить бесплатный урок и получить запись.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fed3\u002F70c\u002F212\u002Fed370c212aac499c0289e66545c1c82e.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otusea","startDay":"2024-02-19","startTime":"19:00","finishDay":"2024-02-19","isOnline":true,"geo":[]},{"id":"events_164","titleHtml":"Открытый урок «Stand Up \"Team Lead\". Открытый микрофон. 5 спикеров курса»","descriptionHtml":"\u003Cp\u003EИстории про «успешный успех» уже порядком надоели, поэтому давайте поговорим о провалах. На ошибках люди выносят для себя много важных выводов, уникальный опыт и стремятся быть лучше, не допуская промахов в будущем.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003E19 февраля в 20.00 (мск) приглашаем на открытый урок курса «Team Lead» в OTUS «Stand Up \"Team Lead\". Открытый микрофон. 5 спикеров курса», на котором преподаватели честно расскажут о своих косяках в процессе становления руководителями, а также:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eпоймём, как точно не надо делать;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eпоговорим о типичных ошибках и вынесенных уроках;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eобсудим, почему не нужно бояться конфликтов и увольнений.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЭто открытый урок курса «Team Lead» с преподавателями-практиками и экспертами из ведущих отраслевых компаний. Партнёр курса – Avito.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EДля обучения возможны разные способы оплаты и рассрочка платежа.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc75\u002F441\u002F935\u002Fc7544193515536c86f9e6dce2908340b.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otusstandup","startDay":"2024-02-19","startTime":"20:00","finishDay":"2024-02-19","isOnline":true,"geo":[]},{"id":"events_170","titleHtml":"Вебинар «Разрабатываем pipeline в ClearML и удаленный запуск на сервер»","descriptionHtml":"\u003Cp\u003EХотите свести «ручной труд» в MLOps к минимуму и автоматизировать однотипные задачи? Стройте пайплайны!&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EУдобное решение – фреймворк ClearML.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EOTUS приглашает 21.02.2024 в 20:00 мск на открытый практический вебинар «Разрабатываем pipeline в ClearML и удаленный запуск на сервер», который приурочен к старту онлайн курса «MLOps».&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EЗанятие проведёт Влад Пивоваров. Влад руководил исследованиями данных в Сбербанке, Airbnb, Groupon. На вебинаре:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EРазобьём сложный python-код на части.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EПревратим код в pipeline.&nbsp;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЗапустим обучение на удалённой машине.&nbsp;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПри регистрации можно пройти короткий вступительный тест на знание ML.\u003C\u002Fp\u003E\u003Cp\u003EВебинар будет интересен дата-сайентистам, MLOps- и devops-инженерам.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EПосле вебинара вы сможете записаться на курс «MLOps». Обучение доступно в рассрочку.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa9b\u002F40b\u002Fbbb\u002Fa9b40bbbbd5a1f307dcc513f764bbecc.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otuswebML","startDay":"2024-02-21","startTime":"20:00","finishDay":"2024-02-21","isOnline":true,"geo":[]},{"id":"events_172","titleHtml":"Онлайн-урок «Компетенции и личные навыки операционного директора в IT»","descriptionHtml":"\u003Cp\u003EКакие навыки нужны операционному директору в IT?\u003C\u002Fp\u003E\u003Cp\u003EРасскажет опытный менеджер, тренер, консультант и ментор Илья Прахт. Приходите на бесплатный урок от OTUS, где вы вместе с экспертом разберете:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003EКто такой COO в IT.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКакие бывают типы COO, чем они различаются.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКакие основные задачи решает COO.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКакие компетенции нужны COO в IT.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКак построить свой путь развития в COO.&nbsp;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВстречаемся 21 февраля в 20:00 мск в рамках курса «COO \u002F Операционный директор в IT».\u003C\u002Fp\u003E\u003Cp\u003EПри поступлении в группу обучения после урока возможны разные способы оплаты и рассрочка платежа.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F313\u002Fb18\u002F417\u002F313b1841795dcbd1f8389131f4b5d3e8.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otusCOO","startDay":"2024-02-21","startTime":"20:00","finishDay":"2024-02-21","isOnline":true,"geo":[]},{"id":"events_122","titleHtml":"Вебинар «Лихие джуновские: что нужно знать про найм в ML\u002FDS в начале карьеры»","descriptionHtml":"\u003Cp\u003EЧто нужно знать про найм в ML\u002FDS в начале карьеры?\u003C\u002Fp\u003E\u003Cp\u003EНа вебинаре Борис Цейтлин расскажет про поиск работы в ML\u002FDS в России и не только.\u003C\u002Fp\u003E\u003Cp\u003EВы узнаете:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Cp\u003EКакие пет-проекты делать для портфолио.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКак искать вакансии и откликаться на них.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКак проходить собеседования.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EКак стать священной коровой для компании.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EЧему учиться.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003EВстречаемся 27 февраля в 20:00 по Москве в рамках курса Machine Learning Professional.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fd6e\u002F1b0\u002F4c8\u002Fd6e1b04c878148e37a547e03a37c18ee.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otus_mlds","startDay":"2024-02-27","startTime":"20:00","isOnline":true,"geo":[]},{"id":"events_176","titleHtml":"Серия занятий «Тренировки по алгоритмам 5.0» от Яндекса","descriptionHtml":"\u003Cp\u003EКак решать алгоритмический блок при найме в IT? Разбираемся на тренировках по алгоритмам от Яндекса.\u003C\u002Fp\u003E\u003Cp\u003EЧетыре недели вы решаете задачи, смотрите лекции и разборы. Чем больше решите задач, тем выше подниметесь в рейтинге.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EЛучшие участники получат персональные тренировки и пройдут пробные алгоритмические собеседования.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EУспешные собеседования будут засчитаны при отборе на стажировку или в штат Яндекса. Приём заявок до 28 февраля.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fac9\u002F383\u002F51c\u002Fac938351c65f564f8b0bf373c436de53.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_yaalg","startDay":"2024-03-01","startTime":"19:00","finishDay":"2024-04-19","isOnline":true,"geo":[]},{"id":"events_140","titleHtml":"DevOpsConf 2024: конференция для инженеров и всех, кто должен понимать инженеров","descriptionHtml":"\u003Cp\u003E4 и 5 марта состоится DevOpsConf 2024 в Москве.\u003C\u002Fp\u003E\u003Cp\u003EМы готовим самую крупную конференцию для инженеров, CTO, CIO, техлидов и тимлидов в России и СНГ. Более 1000 ваших единомышленников соберутся в Сколково в самом начале весны.\u003C\u002Fp\u003E\u003Cp\u003EC 2009 года конференция значительно выросла, в программе 15-й DevOpsConf: более 80 докладов от ведущих экспертов, 10+ воркшопов, митапы и круглые столы.\u003C\u002Fp\u003E\u003Cp\u003EТемы этого года:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eуправление в DevOps;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Ereliability engineering;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eplatform engineering глазами инженеров из СберМаркет и Яндекс.Go;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eсистемное администрирование;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003EIT-безопасность и DevSecOps;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eэксплуатация крупных проектов;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eтехнологическая независимость;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eновые инструменты и технологии.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВстречаемся 4 и 5 марта на DevOpsConf 2024 в Сколково.\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2a5\u002Fb6d\u002F6fc\u002F2a5b6d6fc13caf3dabce9c8ab833e282.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_odc","startDay":"2024-03-04","startTime":"10:00","finishDay":"2024-03-05","finishTime":"20:00","isOnline":true,"geo":["Москва"]},{"id":"events_160","titleHtml":"«GoCloud 2024. Облачные грани будущего» — IT-конференция Cloud.ru про облака","descriptionHtml":"\u003Cp\u003EВместе обсудим IT-тренды, поделимся опытом и найдем инновационные решения для ваших задач.&nbsp;\u003C\u002Fp\u003E\u003Cp\u003EЧто ждет участников:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003E3 тематических трека про новую облачную платформу, прорывные технологии и клиентские инсайты;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003E20 сессий с экспертами из мира облачных технологий;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Elive-демонстрации облачных платформ и сервисов;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eнетворкинг с разработчиками и идеологами продуктов Cloud.ru.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EКлючевые темы GoCloud 2024:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Cp\u003Eоблако и бизнес: кейсы российских компаний вместе с Cloud.ru;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eopen source: последние разработки;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003ESDS, SDN и Serverless;\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Cp\u003Eобзор новой облачной платформы Cloud.ru.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EКому будет полезно: техническим специалистам, лидерам команд разработки и администрирования, руководителям технологических направлений и R&amp;D, экспертам и лидерам мнений в IT-индустрии.\u003C\u002Fp\u003E\u003Cp\u003EМероприятие пройдёт в Цифровом деловом пространстве по адресу: ул. Покровка, 47, Москва.\u003C\u002Fp\u003E\u003Cp\u003E\u003C\u002Fp\u003E","imageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9e2\u002F1fc\u002Ff5c\u002F9e21fcf5cb7e9bae5b0f7cb2fafd6a99.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_gocloudcon","startDay":"2024-03-21","startTime":"09:00","finishDay":"2024-03-21","finishTime":"18:00","isOnline":true,"geo":["Москва"]}]},"wysiwyg":{"WYSIWYGRulesRefs":null}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.13e568be.js" defer></script><script src="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.757efe33.js" defer></script>



    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S28W1WC23F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
